Order to run,Script name,Description,Input files,Input description,Output files,Output description
1,county_downscale_nass_cbp.R,"Assemble county-level data from NASS and CBP datasets so that other state-level variables can be downscaled to county, proportional to the county-level data we do have.",,"Raw NASS2012 data, raw CBP2012 data, data for disaggregation of oilseed and grain NAICS category, NAICS-BEA crosswalk",county_weightings_for_downscale.csv,"By county and BEA, numbers of establishments and employees"
2,downscale_state_production_county.R,"Use the county-level weightings to downscale state-level production of goods to the county level, based on numbers of establishments in each county",,,,
3,tabulate_cropland_nass_by_bea.R,"Total up the land area from the NASS dataset for each state x NAICS code, and then map NAICS to BEA",,Same input as #1 (sources script 1),nass_workers_receipts_3landtypes_bea.csv,"by state and BEA, commodity receipts, number of employees, and land area of annual crop, permanent crop, and pasture"
4,land_exchange_by_state.R,"Divide the land areas by the total commodity receipts for each BEA code for each state to get a ""land exchange"" or I-O model coefficient matrix for each state.",nass_workers_receipts_3landtypes_bea.csv,"by state and BEA, commodity receipts, number of employees, and land area of annual crop, permanent crop, and pasture",state_land_exchange_tables.RData,"list of land exchange matrices, one for each state. Each matrix is 3x10 where rows represent the 3 land types and columns the 10 BEA codes for primary agricultural goods"
5,read_diet_data.R,Munging of the USA dietary guidelines values,dietaryguidelinesfoodpatterns_cleaned.xlsx,manually cleaned USA dietary guidelines 2015 data,us_dietary_guidelines_wide.csv; us_dietary_guidelines_long.csv,processed USA dietary guidelines 2015
6,healthy_diet_simulation.R,"Further process the diet data, converting everything to calories so they are in common units, then joining it with LAFA based on a crosswalk table",raw_data/food_consumption/diet_guidelines/lancet_planetary_health_diet.csv and us_dietary_guidelines_long.csv; lafa_dietary_guidelines_crosswalk.csv; the output of clean_lafa2019.R,Lancet and USA dietary guidelines diet data; crosswalk to harmonize LAFA with the diets; cleaned LAFA data,proportion_diet_lancet.csv; proportion_diet_usaguidelines.csv; lafa_joined_with_diet_proportions.csv,Lancet and USA dietary guidelines data all converted to the same units; LAFA joined with the diet data
7,waste_reduction_simulation.R,Use the preconsumer and consumer waste estimates from LAFA to add waste reduction factors to the diet factors in the joined LAFA-diet data,lafa_joined_with_diet_proportions.csv,LAFA joined with the diet data,lafa_with_production_factors_diet_x_waste.csv,"Factors, relative to baseline, representing the change in food consumption for each LAFA category under alternative diet scenarios and waste reduction scenarios"
8,harmonize_scenarios_bea.R,"Map the LAFA categories to BEA categories, then calculate the consumption factors for diet scenarios, waste reduction scenarios, and factorial combination of the two, for each BEA category. This requires supplementing the LAFA data and diet data with assumptions for change in beverage consumption which isn't included in either LAFA or explicitly in the diet data.",lafa_with_production_factors_diet_x_waste.csv FIXME ADD MORE HERE,"The factors in LAFA units, the QFAHPD data, then a whole bunch of crosswalks: BEA-QFAHPD, QFAHPD-LAFA, LAFA-BEA, BEA-LAFA, and an internal LAFA harmonization table to show which LAFA categories are aggregations of other ones",bea_consumption_factors_diet_waste_scenarios.csv,"Food consumption factors relative to baseline for all food-related BEA codes in all diet scenarios, waste scenarios, and diet x waste scenarios"
9,county_level_consumption.R,"First use the county-level personal income data to downscale the BEA baseline personal consumption expenditures vector to each county. Then, use the consumption factors to create an alternative vector for each county in each scenario. Next, apply the I-O approach by multiplying the Leontief inverse by the vector for each county to get the total demand from each county in each scenario, including intermediate.",,,,
10,county_allocate_flows_simple.R,"Use the assumption that production of each county is proportionally allocated to all counties, ignoring the distance between them. For all counties, BEA categories, and scenarios, allocate all county production to a consuming county.",,,,
11,land_footprint_estimate.R,"Apply the second part of the EEIO model by multiplying the county total demand for each county in each scenario) allocated across all producing counties, times the land exchanges for the states where the producing counties are located, to result in land flows between each county in each scenario (including 3 land types).",,,,
12,county_to_tnc_landflows.R,"Convert flows from inter-county flows to inter-TNC ecoregion flows (first incoming only, or TNC to county, and next incoming+outgoing, or TNC to TNC). The first part is done by proportionally dividing up the flows exiting each county to flows exiting each TNC ecoregion that makes up that county, based on the proportions of NLCD pixels in each ecoregion in each county. The second part is done by proportionally dividing up the flows entering each county to flows entering each TNC ecoregion that makes up that county, based on the proportion of population in each ecoregion in each county. (Those proportional counts were done in previous scripts described elsewhere.)",,,,
13,landflows_to_biodiv.R,"Multiply inter-TNC-ecoregion flows by biodiversity threat characterization factors to get the estimated species lost as a result of each flow. This is done by joining the TNC-TNC flow data for each scenario with the Chaudhary characterization factors for the TNC region where the flow originates, using the ""medium intensity"" assumption, then multiplying the flow in square meters by the CF in species lost per square meter of land occupied.",,,,
